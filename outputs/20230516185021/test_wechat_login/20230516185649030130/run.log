INFO  2023-05-16 18:56:49,031 minitest.py _miniSetUp      341 =========Current case: test_wechat_login=========
INFO  2023-05-16 18:56:49,032 minitest.py _miniSetUp      344 package info: C:.Users.CDS-DN268.PycharmProjects.applet-auto.testcase.test_login, case info: LoginPageTest.test_wechat_login
INFO  2023-05-16 18:56:49,033 basenative.py wrapper         25  call WXAndroidNative.check_connection
INFO  2023-05-16 18:56:53,045 basenative.py wrapper         29  call WXAndroidNative.check_connection end
INFO  2023-05-16 18:56:53,046 basenative.py wrapper         25  call BaseNative.back_to_miniprogram
INFO  2023-05-16 18:56:53,047 basenative.py back_to_miniprogram 550 try back_to_miniprogram 3
DEBUG 2023-05-16 18:57:01,120 androidnative.py _get_current_activity 927     mResumedActivity: ActivityRecord{6d0cc3b u0 com.tencent.mm/.plugin.appbrand.ui.AppBrandUI t89}

INFO  2023-05-16 18:57:01,121 androidnative.py _get_current_activity 932 current activity is com.tencent.mm/.plugin.appbrand.ui.AppBrandUI
ERROR 2023-05-16 18:57:02,889 connection.py wait_for        746 Can't wait until App.initialized
WARNI 2023-05-16 18:57:02,890 wx_minium.py __wait_app_initialized 234 rewait [App.initialized] for 10.771753
INFO  2023-05-16 18:57:05,154 basenative.py wrapper         29  call BaseNative.back_to_miniprogram end
DEBUG 2023-05-16 18:57:05,155 connection.py _safely_send    417 ASYNC_SEND > {"id":"b7977d50-cdf7-44dc-9259-c9f375c6a4ed","method":"App.callWxMethod","params":{"method":"switchTab","args":[{"url":"/pages/index/index"}]}}
DEBUG 2023-05-16 18:57:06,116 connection.py _on_message     652 RECV < {"method":"App.bindingCalled","params":{"name":"onAppRouteDone","args":[{"path":"pages/index/index","rawPath":"pages/index/index.html","query":{},"openType":"switchTab","__ts__":1684234625948,"webviewId":-238099975},1684234625958]}}
INFO  2023-05-16 18:57:06,117 app.py     _on_route_changed 785 Route changed, {'name': 'onAppRouteDone', 'args': [{'path': 'pages/index/index', 'rawPath': 'pages/index/index.html', 'query': {}, 'openType': 'switchTab', '__ts__': 1684234625948, 'webviewId': -238099975}, 1684234625958]}
DEBUG 2023-05-16 18:57:06,117 connection.py _on_message     652 RECV < {"id":"b7977d50-cdf7-44dc-9259-c9f375c6a4ed","result":{"result":{"errMsg":"switchTab:ok"}}}
INFO  2023-05-16 18:57:06,118 connection.py _handle_async_msg 688 received async msg: b7977d50-cdf7-44dc-9259-c9f375c6a4ed
INFO  2023-05-16 18:57:06,120 minitest.py capture         673 capture setup.png
INFO  2023-05-16 18:57:06,121 basenative.py wrapper         25  call WXAndroidNative.screen_shot
INFO  2023-05-16 18:57:09,192 basenative.py wrapper         29  call WXAndroidNative.screen_shot end
INFO  2023-05-16 18:57:09,193 minitest.py _miniSetUp      394 =========case: test_wechat_login start=========
INFO  2023-05-16 18:57:09,194 app.py     navigate_to     522 NavigateTo: /pages/common/login/index
DEBUG 2023-05-16 18:57:09,195 connection.py _safely_send    417 ASYNC_SEND > {"id":"de31f965-b7c8-4756-b6e1-581201b05876","method":"App.callWxMethod","params":{"method":"navigateTo","args":[{"url":"/pages/common/login/index"}]}}
DEBUG 2023-05-16 18:57:10,062 connection.py _on_message     652 RECV < {"id":"de31f965-b7c8-4756-b6e1-581201b05876","result":{"result":{"errMsg":"navigateTo:ok","eventChannel":{"listener":{}}}}}
INFO  2023-05-16 18:57:10,063 connection.py _handle_async_msg 688 received async msg: de31f965-b7c8-4756-b6e1-581201b05876
DEBUG 2023-05-16 18:57:10,399 connection.py _on_message     652 RECV < {"method":"App.bindingCalled","params":{"name":"onAppRouteDone","args":[{"path":"pages/common/login/index","rawPath":"pages/common/login/index.html","query":{},"openType":"navigateTo","__ts__":1684234630163,"webviewId":726696289},1684234630179]}}
INFO  2023-05-16 18:57:10,400 app.py     _on_route_changed 785 Route changed, {'name': 'onAppRouteDone', 'args': [{'path': 'pages/common/login/index', 'rawPath': 'pages/common/login/index.html', 'query': {}, 'openType': 'navigateTo', '__ts__': 1684234630163, 'webviewId': 726696289}, 1684234630179]}
DEBUG 2023-05-16 18:57:10,401 connection.py _safely_send    417 SEND > {"id":"bc5172e8-4238-4e98-83d5-b21fc48b7225","method":"App.getCurrentPage","params":{}}
DEBUG 2023-05-16 18:57:10,853 connection.py _on_message     652 RECV < {"id":"bc5172e8-4238-4e98-83d5-b21fc48b7225","result":{"pageId":726696289,"path":"pages/common/login/index","query":{}}}
DEBUG 2023-05-16 18:57:10,854 connection.py _safely_send    417 SEND > {"id":"9728aca4-ae2e-4e8e-b7b1-156e0f2c6e31","method":"App.getCurrentPage","params":{}}
DEBUG 2023-05-16 18:57:11,148 connection.py _on_message     652 RECV < {"id":"9728aca4-ae2e-4e8e-b7b1-156e0f2c6e31","result":{"pageId":726696289,"path":"pages/common/login/index","query":{}}}
INFO  2023-05-16 18:57:11,149 page.py    _get_elements_by_css 559 try to get elements: button
DEBUG 2023-05-16 18:57:11,150 connection.py _safely_send    417 SEND > {"id":"b4a06bb4-7191-4d33-9921-5554a5bd6a78","method":"Page.getElements","params":{"selector":"button","pageId":726696289}}
DEBUG 2023-05-16 18:57:12,281 connection.py _on_message     652 RECV < {"id":"b4a06bb4-7191-4d33-9921-5554a5bd6a78","result":{"elements":[{"elementId":"d0bd39bb-f71d-4b28-bb4a-e8eb5754f6f5","tagName":"button"},{"elementId":"90a0852f-a709-4c25-868a-e89903ecea3c","tagName":"button"}]}}
INFO  2023-05-16 18:57:12,283 page.py    _get_elements_by_css 566 find elements success: [<minium.miniprogram.base_driver.element.BaseElement object at 0x00000200AA739A90>, <minium.miniprogram.base_driver.element.BaseElement object at 0x00000200AA739B50>]
DEBUG 2023-05-16 18:57:12,284 connection.py _safely_send    417 SEND > {"id":"c80dd93c-3a62-4275-b7ea-d5d4bb3b01a4","method":"Element.getDOMProperties","params":{"names":["innerText"],"elementId":"d0bd39bb-f71d-4b28-bb4a-e8eb5754f6f5","pageId":726696289}}
DEBUG 2023-05-16 18:57:13,532 connection.py _on_message     652 RECV < {"id":"c80dd93c-3a62-4275-b7ea-d5d4bb3b01a4","result":{"properties":["微信登录/注册"]}}
DEBUG 2023-05-16 18:57:13,533 connection.py _safely_send    417 SEND > {"id":"3f4cffc9-9412-4d01-8441-c82f0015532f","method":"Element.getStyles","params":{"names":["pointer-events"],"elementId":"d0bd39bb-f71d-4b28-bb4a-e8eb5754f6f5","pageId":726696289}}
ERROR 2023-05-16 18:57:13,674 connection.py wait_for        746 Can't wait until App.initialized
DEBUG 2023-05-16 18:57:13,789 connection.py _on_message     652 RECV < {"id":"3f4cffc9-9412-4d01-8441-c82f0015532f","result":{"styles":["auto"]}}
DEBUG 2023-05-16 18:57:13,790 connection.py _safely_send    417 SEND > {"id":"651ff1ce-7dc2-4ce3-a671-84c423357a85","method":"Element.tap","params":{"elementId":"d0bd39bb-f71d-4b28-bb4a-e8eb5754f6f5","pageId":726696289}}
DEBUG 2023-05-16 18:57:14,037 connection.py _on_message     652 RECV < {"method":"App.bindingCalled","params":{"name":"getUserProfile_super_after","args":[null]}}
DEBUG 2023-05-16 18:57:14,038 app.py     super_after     902 wx.getUserProfile after hook result: [None]
INFO  2023-05-16 18:57:14,039 basenative.py wrapper         25  call BaseNative.notify
DEBUG 2023-05-16 18:57:14,040 basenative.py notify          625 receive a notify signal
INFO  2023-05-16 18:57:14,041 basenative.py wrapper         29  call BaseNative.notify end
DEBUG 2023-05-16 18:57:14,041 basenative.py __op_auto_authorize 725 before auto_authorize_callback
INFO  2023-05-16 18:57:14,044 basenative.py wrapper         25  call WXAndroidNative.allow_authorize
DEBUG 2023-05-16 18:57:14,045 androidnative.py _handle_btn     341 handle android.widget.Button[允许]
DEBUG 2023-05-16 18:57:14,115 connection.py _on_message     652 RECV < {"id":"651ff1ce-7dc2-4ce3-a671-84c423357a85","result":{}}
INFO  2023-05-16 18:57:14,116 basenative.py wrapper         25  call BaseNative.notify
DEBUG 2023-05-16 18:57:14,118 basenative.py notify          625 receive a notify signal
INFO  2023-05-16 18:57:14,118 basenative.py wrapper         29  call BaseNative.notify end
INFO  2023-05-16 18:57:18,152 minitest.py capture         673 capture assertEqual-failed.png
INFO  2023-05-16 18:57:18,154 basenative.py wrapper         25  call WXAndroidNative.screen_shot
INFO  2023-05-16 18:57:21,884 basenative.py wrapper         28  WXAndroidNative.allow_authorize return False
INFO  2023-05-16 18:57:21,885 basenative.py wrapper         29  call WXAndroidNative.allow_authorize end
INFO  2023-05-16 18:57:22,284 basenative.py wrapper         29  call WXAndroidNative.screen_shot end
DEBUG 2023-05-16 18:57:22,285 connection.py _safely_send    417 SEND > {"id":"a9f2793b-d3e2-49b1-a594-0cfa10034b92","method":"Page.getElementByXpath","params":{"selector":"/*","pageId":726696289}}
DEBUG 2023-05-16 18:57:22,897 basenative.py __op_auto_authorize 727 after auto_authorize_callback, True. flag: True
DEBUG 2023-05-16 18:57:39,920 connection.py _on_message     652 RECV < {"method":"App.bindingCalled","params":{"name":"onAppRouteDone","args":[{"path":"pages/user/index","rawPath":"pages/user/index.html","query":{},"openType":"switchTab","__ts__":1684234635816,"webviewId":267883137},1684234635824]}}
INFO  2023-05-16 18:57:39,921 app.py     _on_route_changed 785 Route changed, {'name': 'onAppRouteDone', 'args': [{'path': 'pages/user/index', 'rawPath': 'pages/user/index.html', 'query': {}, 'openType': 'switchTab', '__ts__': 1684234635816, 'webviewId': 267883137}, 1684234635824]}
DEBUG 2023-05-16 18:57:44,496 connection.py _on_message     652 RECV < {"id":"a9f2793b-d3e2-49b1-a594-0cfa10034b92","error":{"message":"page destroyed"}}
ERROR 2023-05-16 18:57:44,498 connection.py _on_message     660 [a9f2793b-d3e2-49b1-a594-0cfa10034b92]: page destroyed
ERROR 2023-05-16 18:57:44,499 assertbase.py _add_assert_info 415 page destroyed
Traceback (most recent call last):
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\framework\assertbase.py", line 57, in hook_assert
    return src(self, *args, **kwargs)
  File "D:\python39\lib\unittest\case.py", line 837, in assertEqual
    assertion_func(first, second, msg=msg)
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\framework\assertbase.py", line 57, in hook_assert
    return src(self, *args, **kwargs)
  File "D:\python39\lib\unittest\case.py", line 1217, in assertMultiLineEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "D:\python39\lib\unittest\case.py", line 676, in fail
    raise self.failureException(msg)
AssertionError: '/pages/common/login/index' != '/pages/user/index'
- /pages/common/login/index
+ /pages/user/index


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\framework\assertbase.py", line 413, in _add_assert_info
    hook_result = self.hook_assert(name, ret, reason)
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\framework\minitest.py", line 778, in hook_assert
    wxml = self.page_wxml
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\framework\minitest.py", line 623, in page_wxml
    wxml = self.page.get_element("/*").outer_wxml
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\miniprogram\base_driver\minium_log.py", line 160, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\miniprogram\base_driver\page.py", line 270, in get_element
    return self.get_element_by_xpath(
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\miniprogram\base_driver\minium_log.py", line 160, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\miniprogram\base_driver\page.py", line 467, in get_element_by_xpath
    el = search_element()
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\utils\utils.py", line 56, in wrapper
    r = func(*args, **kwargs)
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\miniprogram\base_driver\page.py", line 465, in search_element
    return self._get_element_by_xpath(xpath)
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\utils\utils.py", line 82, in wrapper
    return func(*args, **kwargs)
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\miniprogram\base_driver\page.py", line 639, in _get_element_by_xpath
    ret = self._send("Page.getElementByXpath", {"selector": xpath})
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\miniprogram\base_driver\page.py", line 490, in _send
    self.connection.send(method, params)
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\miniprogram\base_driver\connection.py", line 447, in send
    return self._receive_response(cmd)
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\miniprogram\base_driver\connection.py", line 473, in _receive_response
    raise response
minium.framework.exception.MiniAppError: page destroyed
DEBUG 2023-05-16 18:57:44,505 connection.py _safely_send    417 ASYNC_SEND > {"id":"aa869b59-fd79-4801-95c7-c93e3f0bd902","method":"App.callWxMethod","params":{"method":"switchTab","args":[{"url":"/pages/index/index"}]}}
DEBUG 2023-05-16 18:57:46,565 connection.py _on_message     652 RECV < {"method":"App.bindingCalled","params":{"name":"onAppRouteDone","args":[{"path":"pages/index/index","rawPath":"pages/index/index.html","query":{},"openType":"switchTab","__ts__":1684234665011,"webviewId":-238099975},1684234665020]}}
DEBUG 2023-05-16 18:57:46,566 connection.py _on_message     652 RECV < {"id":"aa869b59-fd79-4801-95c7-c93e3f0bd902","result":{"result":{"errMsg":"switchTab:ok"}}}
INFO  2023-05-16 18:57:46,567 app.py     _on_route_changed 785 Route changed, {'name': 'onAppRouteDone', 'args': [{'path': 'pages/index/index', 'rawPath': 'pages/index/index.html', 'query': {}, 'openType': 'switchTab', '__ts__': 1684234665011, 'webviewId': -238099975}, 1684234665020]}
INFO  2023-05-16 18:57:46,567 connection.py _handle_async_msg 688 received async msg: aa869b59-fd79-4801-95c7-c93e3f0bd902
DEBUG 2023-05-16 18:57:46,569 minitest.py _miniTearDown   587 =========Current case Down: test_wechat_login=========
INFO  2023-05-16 18:57:46,570 minitest.py capture         673 capture teardown.png
INFO  2023-05-16 18:57:46,571 basenative.py wrapper         25  call WXAndroidNative.screen_shot
INFO  2023-05-16 18:57:50,530 basenative.py wrapper         29  call WXAndroidNative.screen_shot end
INFO  2023-05-16 18:57:50,531 basenative.py wrapper         25  call BaseNative.get_start_up
INFO  2023-05-16 18:57:50,532 basenative.py wrapper         29  call BaseNative.get_start_up end
ERROR 2023-05-16 18:57:50,534 assertbase.py _get_stack_info 342 <bound method LoginPageTest.test_wechat_login of <testcase.test_login.LoginPageTest testMethod=test_wechat_login>>
Traceback (most recent call last):
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\framework\libs\unittest\case.py", line 41, in testPartExecutor
    yield
  File "C:\Users\CDS-DN268\PycharmProjects\applet-auto\venv\lib\site-packages\minium\framework\libs\unittest\case.py", line 127, in run
    self._callTestMethod(testMethod)
AssertionError: '/pages/common/login/index' != '/pages/user/index'
- /pages/common/login/index
+ /pages/user/index

